---
title: Как работает docusaurus-tde?
sidebar_label: Как работает docusaurus-tde
sidebar_position: 1
---

### Контекст

Для понимания принципов работы docusaurus-tde нужно знать, что эта система состоит из 2 компонентов:

* Приложение docusaurus.
* Дополнительный код, который настраивает приложение docusaurus.

В стандартном использовании docusaurus документации подразумевается, что вы, в корне своего проекта, будете иметь
отдельную директорию с конфигом, зависимостями и контентом необходимыми для сборки приложения, про сам Docusaurus вы
можете почитать на [официальном сайте](https://docusaurus.io/).

В масштабах нашей инфраструктуры мы решили, что можно перенести управление зависимостями и конфигурирование в отдельный
инструмент, а для пользователей оставить только генерацию контента. (Спойлер полностью вынести конфигурацию нам не
удалось и пользователи все еще конфигурируют отображение с помощью файлов описывающих структуру контента - `_category_.yml`)

Преимуществом docusaurus-tde является то, что для него не нужна отдельная директория для хранения зависимостей, а значит
понимание конечного репозитория и используемых в нем скриптов становится проще.

### Про "Дополнительный код"

Весь код, который написан поверх docusaurus - это набор функций, что модифицируют конфиг из
файла `@docusaurus-tde/app/root/docusaurus.config.js`

Для того чтоб унифицировать этот процесс была реализована механика применения хуков. Хуки - это структуры, в которых
описаны функции подготовки данных и регистрация этих данных в конфиг docusaurus.

```typescript
interface HookContract {
  name: string;
  version: string;
  before?: Array<Function>;
  runtime?: Array<Function>;
  after?: Array<Function>;
}
```

Как можно заметить в интерфейсе хука есть 3 набора функций: **before**, **runtime** и **after**.
Эти наборы соотносятся к трём событиям, что могут возникнуть во время запуска/сборки документации.
Другими словами если разработчику хука нужно **запустить функцию перед** сборкой документации - он помещает ее в
очередь **before**, для других событий аналогично.

> Если вы хотите больше узнать про, то как устроены хуки - прочитайте [эту статью](creating-hooks).

В итоге мы получили полноценную систему которая позволяет скрыть подготовку данных и сложную конфигурацию от пользователя
за декларативным интерфейсом.
